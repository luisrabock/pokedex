import React, { useEffect } from "react";
import { useQuery } from "@apollo/react-hooks";
import { useSelector, useDispatch } from "react-redux";
import allActions from "../../actions";
import SearchInput from "../Search";

import { GET_POKEMON } from "../../graphql/queries";

import * as S from "./styled";

const Content = () => {
  const { data } = useQuery(GET_POKEMON, {
    variables: { name: "Pikachu" },
  });

  // const counter = useSelector(state => state.counter)
  const counter = useSelector((state) => state.counter);
  const currentUser = useSelector((state) => state.currentUser);

  const dispatch = useDispatch();
  console.log("data..", data);
  console.log("currentUser..", currentUser);
  if (currentUser.user)
    console.log("currentUser.user..", currentUser.user.name);

  const user = { name: "Deux" };
  useEffect(() => {
    dispatch(allActions.userActions.setUser(user));
  }, []);
  return (
    <S.Container>
      <SearchInput />
      {currentUser.user && (
        <h1>
          Hello,
          {currentUser.user.name}
        </h1>
      )}
      <div>
        <h1>Counter: {counter}</h1>
        <button onClick={() => dispatch(allActions.counterActions.increment())}>
          Increase Counter
        </button>
        <button onClick={() => dispatch(allActions.counterActions.decrement())}>
          Decrease Counter
        </button>
        <button
          onClick={() =>
            dispatch(allActions.userActions.setUser({ name: "Pedro" }))
          }
        >
          Decrease Counter
        </button>
      </div>
    </S.Container>
  );
};

export default Content;
